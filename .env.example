# =============================================================================
# FUSE MONOREPO - Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# This file is used across all apps in the monorepo

# =============================================================================
# GENERAL
# =============================================================================
NODE_ENV=development
PORT=3001
# Set to 'true' on staging environments
# STAGING=true

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================
# For local development with Aptible tunnel:
# Run: aptible db:tunnel patient-api-staging-postgresql --port 5433
# Then use: postgresql://username:password@localhost:5433/database_name
DATABASE_URL=postgresql://username:password@localhost:5432/fuse_db
# Optional: separate DB URL for development (falls back to DATABASE_URL)
# DEV_DATABASE_URL=postgresql://username:password@localhost:5433/fuse_db

# =============================================================================
# AUTHENTICATION & SESSION
# =============================================================================
# JWT Secret - Used for JWT token signing (min 32 chars)
JWT_SECRET=your-jwt-secret-key-change-in-production

# Session Secret - Used for express-session (min 32 chars)
SESSION_SECRET=your-super-secure-session-secret-change-in-production

# =============================================================================
# GOOGLE OAUTH
# =============================================================================
# NEXT_PUBLIC_GOOGLE_CLIENT_ID=your-google-client-id
# GOOGLE_CLIENT_SECRET=your-google-client-secret
# GOOGLE_REDIRECT_URI=http://localhost:3001/auth/google/callback

# =============================================================================
# GOOGLE MAPS
# =============================================================================
# Used by patient-frontend for address autocomplete
# (mapped to NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in next.config.js)
# GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# =============================================================================
# STRIPE PAYMENT INTEGRATION
# =============================================================================
# Stripe Secret Key (Backend)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe Publishable Key (Frontend - must start with NEXT_PUBLIC_)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# Stripe Webhook Secret
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Subscription Product & Price IDs
STRIPE_SUBSCRIPTION_PRODUCT=prod_your_product_id
STRIPE_SUBSCRIPTION_PRICE=price_your_price_id

# Stripe Platform Account ID (for transfers/refunds)
# STRIPE_PLATFORM_ACCOUNT_ID=acct_your_platform_account_id

# Stripe Brand Subscription Product ID
# STRIPE_BRAND_SUBSCRIPTION_PRODUCT_ID=prod_your_brand_subscription_product_id

# =============================================================================
# AWS S3 CONFIGURATION
# =============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_PUBLIC_BUCKET=your-bucket-name

# =============================================================================
# SENDGRID EMAIL SERVICE
# =============================================================================
SENDGRID_API_KEY=SG.your_sendgrid_api_key
# SENDGRID_FROM_EMAIL=no-reply@fuse.health
# SENDGRID_VERIFIED_SENDER=no-reply@fuse.health
# Webhook base URL for SendGrid event tracking (falls back to API_URL)
# SENDGRID_WEBHOOK=https://your-api-url.com

# =============================================================================
# TWILIO SMS SERVICE
# =============================================================================
# TWILIO_API_KEY=your_twilio_api_key

# =============================================================================
# PHARMACY API INTEGRATION (AbsoluteRx)
# =============================================================================
PHARMACY_API_KEY=AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE
PHARMACY_CLINIC_ID=your-clinic-id
# PHARMACY_PHYSICIAN_ID=4141
# PHYSICIAN_NPI=0000000000
# PHYSICIAN_FIRST_NAME=SHUBH
# PHYSICIAN_LAST_NAME=DHRUV
# PHYSICIAN_EMAIL=shubhdhruv.nhsc@gmail.com
# PHYSICIAN_PHONE=19513292195

# AbsoluteRx-specific overrides (falls back to PHARMACY_API_KEY / PHARMACY_PHYSICIAN_ID)
# ABSOLUTERX_API_KEY=your-absoluterx-api-key
# ABSOLUTERX_PHYSICIAN_ID=4141

# =============================================================================
# IRONSAIL PHARMACY INTEGRATION
# =============================================================================
# IRONSAIL_API_BASE_URL=https://sandbox.api.impetusrx.com/pharmacy/fuse-sandbox/api/v1
# IRONSAIL_TENANT=fuse-sandbox
# IRONSAIL_CLIENT_ID=your-ironsail-client-id
# IRONSAIL_CLIENT_SECRET=your-ironsail-client-secret
# IRONSAIL_SETUP_TOKEN=your-ironsail-setup-token
# IRONSAIL_WEBHOOK_URL=https://your-api-url.com/ironsail-webhook
# Google Sheets for IronSail product sync
# IRONSAIL_FUSE_PRODUCTS_SPREADSHEET_ID=your-spreadsheet-id
# IRONSAIL_PRODUCTS_SPREADSHEET=your-spreadsheet-id
# IRONSAIL_SPREADSHEET_SHEET_NAME=Sheet1
# IRONSAIL_FUSE_PRODUCTS_DESTINATION_EMAIL_ADDRESS=orders@ironsail.com

# =============================================================================
# OLYMPIA PHARMACY INTEGRATION
# =============================================================================
# OLYMPIA_PHARMACY_API_URL=https://olympia-pharmacy-api-url
# OLYMPIA_PHARMACY_USERNAME=your-olympia-username
# OLYMPIA_PHARMACY_PASSWORD=your-olympia-password
# OLYMPIA_PHARMACY_SECRET=your-olympia-secret
# OLYMPIA_PHARMACY_WEBHOOK_SECRET=your-olympia-webhook-secret

# =============================================================================
# BELUGA HEALTH INTEGRATION
# =============================================================================
# BELUGA_BASE_URL=https://beluga-api-url
# BELUGA_API_KEY=your-beluga-api-key
# BELUGA_PRODUCTS_ENDPOINT=your-beluga-products-endpoint
# BELUGA_COMPANY_ID=your-beluga-company-id
# BELUGA_DEFAULT_VISIT_TYPE=your-default-visit-type
# FUSE_BELUGA_WEBHOOK_SECRET=your-beluga-webhook-secret
# BELUGA_TEST_MED_ID=test-med-id (non-production only)

# =============================================================================
# MD INTEGRATIONS (Telehealth)
# =============================================================================
MD_INTEGRATIONS_CLIENT_ID=your_md_integrations_client_id
MD_INTEGRATIONS_CLIENT_SECRET=your_md_integrations_client_secret
# MD_INTEGRATIONS_ENV=production
# MD_INTEGRATIONS_BASE_URL=https://md-integrations-base-url
# MD_INTEGRATIONS_OFFERING_ID=your-offering-id
# MD_INTEGRATIONS_SCOPE=*
# MD_INTEGRATIONS_WEBHOOK_SECRET=your-md-webhook-secret
# MD_INTEGRATIONS_WEBHOOK_SIGNATURE_HEADER=x-md-signature

# Sandbox overrides (used when MD_INTEGRATIONS_ENV=sandbox)
# MD_INTEGRATIONS_SANDBOX_CLIENT_ID=your-sandbox-client-id
# MD_INTEGRATIONS_SANDBOX_CLIENT_SECRET=your-sandbox-client-secret
# MD_INTEGRATIONS_SANDBOX_OFFERING_ID=your-sandbox-offering-id

# =============================================================================
# QUALIPHY INTEGRATION
# =============================================================================
# QUALIPHY_BASE_URL=https://internal.qualiphy.me/api
# QUALIPHY_API_KEY=your-qualiphy-api-key

# =============================================================================
# GOOGLE SERVICE ACCOUNT (Sheets API for IronSail)
# =============================================================================
# SERVICE_ACCOUNT_CLIENT_EMAIL=your-service-account@project.iam.gserviceaccount.com
# SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# =============================================================================
# FRONTEND URLs (must start with NEXT_PUBLIC_ for Next.js apps)
# =============================================================================
# Patient Frontend URL (used by API for CORS and redirects)
FRONTEND_URL=http://localhost:3000

# API URL for Frontend Apps
NEXT_PUBLIC_API_URL=http://localhost:3001

# Admin Frontend Base URL
NEXT_PUBLIC_BASE_URL=http://localhost:3002

# Cross-portal URL references
# NEXT_PUBLIC_PATIENT_FRONTEND_URL=http://localhost:3000
# NEXT_PUBLIC_ADMIN_FRONTEND_URL=http://localhost:3002
# NEXT_PUBLIC_AFFILIATE_PORTAL_URL=http://localhost:3005

# Backend URL references for CORS and email links
# ADMIN_FRONTEND_URL=http://localhost:3002
# PATIENT_FRONTEND_URL=http://localhost:3000
# PATIENT_PORTAL_URL=http://localhost:3000
# DOCTOR_PORTAL_URL=http://localhost:3003
# ADMIN_PORTAL_URL=http://localhost:3002
# API_URL=http://localhost:3001

# Additional CORS origins (comma-separated, production only)
# ADDITIONAL_ALLOWED_ORIGINS=https://extra-origin.com

# =============================================================================
# STAGING / ENVIRONMENT FLAGS
# =============================================================================
# Flag to indicate staging environment in frontends
# NEXT_PUBLIC_IS_STAGING=true

# =============================================================================
# AMPLITUDE ANALYTICS
# =============================================================================
# Amplitude API key (shared across all frontend apps, leave empty to disable)
NEXT_PUBLIC_AMPLITUDE_API_KEY=

# =============================================================================
# POSTHOG ANALYTICS
# =============================================================================
# Get your project API key from https://app.posthog.com/project/settings
# Leave unset in local development to disable tracking
NEXT_PUBLIC_POSTHOG_KEY=
# PostHog host (optional, defaults to https://us.i.posthog.com)
# NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com
# Explicit enable flag (only needed for tenant portal which defaults to OFF)
# NEXT_PUBLIC_POSTHOG_ENABLED=true

# =============================================================================
# VERCEL ANALYTICS
# =============================================================================
# Enable Vercel Analytics on admin, tenant, and doctor portals
# NEXT_PUBLIC_ENABLE_VERCEL_ANALYTICS=true

# =============================================================================
# AFFILIATE CONFIGURATION
# =============================================================================
# Revenue percentage for affiliate payouts (default: 1 = 1%)
# AFFILIATE_REVENUE_PERCENTAGE=1

# =============================================================================
# AUTO-APPROVAL (currently disabled)
# =============================================================================
# AUTO_APPROVAL_ENABLED=false
# AUTO_APPROVAL_INTERVAL_MIN=120000
# AUTO_APPROVAL_INTERVAL_MAX=300000

# =============================================================================
# WEBHOOK AUTHENTICATION
# =============================================================================
# Secret for securing internal webhooks between services
APP_WEBHOOK_SECRET=your-app-webhook-secret

# =============================================================================
# BUNDLE ANALYZER (Development)
# =============================================================================
# Set to 'true' to enable Next.js bundle analyzer (admin-frontend)
# ANALYZE=true

# =============================================================================
# TLS/SSL (Production)
# =============================================================================
# Set to '0' to disable TLS certificate verification (development only)
# NODE_TLS_REJECT_UNAUTHORIZED=0

# =============================================================================
# NOTES:
# =============================================================================
# - Never commit .env.local or any file with real credentials to git
# - In production, set these via your hosting platform (Aptible, Vercel, etc.)
# - Frontend environment variables MUST start with NEXT_PUBLIC_ to be accessible
# - Update this file when adding new environment variables to any app
# - Commented-out variables are optional or have sensible defaults
